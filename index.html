<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ุฃูู ูู ูููโ๏ธ</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Amiri&family=Tajawal:wght@700&display=swap');
</style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center min-h-screen py-8">
  <h1 class="text-3xl font-bold mb-4">โจ ูููุฏ ุงููุต ุงูุฐูุจู ุงูุงุญุชุฑุงูู โจ</h1>

  <!-- Canvas -->
  <canvas id="canvas" class="border-4 border-yellow-400 rounded-2xl mb-6 bg-gray-800 w-11/12 md:w-2/3 lg:w-1/2"></canvas>

  <!-- ุงูุชุญูู -->
  <div class="w-11/12 md:w-2/3 lg:w-1/2 bg-gray-800 p-4 rounded-2xl space-y-4 shadow-lg">

    <!-- ุงูุตูุฑุฉ -->
    <div>
      <label class="block mb-1 text-gray-300 font-semibold">๐ท ุงุฎุชุฑ ุตูุฑุฉ:</label>
      <input type="file" id="imageInput" accept="image/*"
        class="block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md
               file:border-0 file:text-sm file:font-semibold file:bg-yellow-500 file:text-gray-900 hover:file:bg-yellow-400">
    </div>

    <!-- ุงููุต -->
    <div>
      <label class="block mb-1 text-gray-300 font-semibold">โ๏ธ ุงููุต:</label>
      <input id="textInput" class="w-full rounded-lg p-2 text-black text-lg" placeholder="ุงูุชุจ ุงููุต ููุง...">
    </div>

    <!-- ุงูุฃููุงู -->
    <div class="flex flex-wrap gap-4">
      <div>
        <label class="block mb-1 text-gray-300 font-semibold">๐จ ููู ุงููุต ุงูุฏุงุฎูู:</label>
        <input type="color" id="fillColor" value="#ffffff" class="w-16 h-10 rounded cursor-pointer">
      </div>

      <div>
        <label class="block mb-1 text-gray-300 font-semibold">๐๏ธ ููู ุงูุญุฏูุฏ:</label>
        <input type="color" id="strokeColor" value="#d4af37" class="w-16 h-10 rounded cursor-pointer">
      </div>

      <div>
        <label class="block mb-1 text-gray-300 font-semibold">๐ ุญุฌู ุงูุญุฏูุฏ:</label>
        <input type="range" id="strokeWidth" min="1" max="20" value="8" class="w-32">
        <p id="strokeWidthLabel" class="text-sm text-gray-400 text-center">8px</p>
      </div>
    </div>

    <!-- ุญุฌู ุงูุฎุท -->
    <div>
      <label class="block mb-1 text-gray-300 font-semibold">๐ ุญุฌู ุงูุฎุท:</label>
      <input type="range" id="fontSize" min="20" max="150" value="80" class="w-full">
      <p id="fontSizeLabel" class="text-center text-sm text-gray-400 mt-1">80px</p>
    </div>

    <!-- ุงููุงููุงูุช -->
    <div class="text-center">
      <button id="toggleHighlight"
        class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition">
        ๐ฆ ุฅุถุงูุฉ ูุงููุงูุช
      </button>
    </div>

    <!-- ุชุญุฑูู ุงููุต -->
    <div class="text-center space-y-2">
      <p class="text-gray-300 font-semibold mb-2">๐ฏ ุชุญูู ูู ููุงู ุงููุต:</p>
      <div class="flex justify-center gap-2">
        <button class="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded" id="upBtn">โฌ๏ธ</button>
      </div>
      <div class="flex justify-center gap-2">
        <button class="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded" id="leftBtn">โฌ๏ธ</button>
        <button class="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded" id="centerBtn">๐ฏ</button>
        <button class="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded" id="rightBtn">โก๏ธ</button>
      </div>
      <div class="flex justify-center gap-2">
        <button class="bg-yellow-500 hover:bg-yellow-400 text-black px-4 py-2 rounded" id="downBtn">โฌ๏ธ</button>
      </div>
    </div>

    <!-- ุชุญููู -->
    <button id="downloadBtn"
      class="w-full py-2 bg-yellow-500 hover:bg-yellow-400 text-black text-lg font-semibold rounded-lg">
      โฌ๏ธ ุชุญููู ุงูุตูุฑุฉ
    </button>
  </div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const img = new Image();
let posX = 250, posY = 250;
let highlightOn = false;

const imageInput = document.getElementById('imageInput');
const textInput = document.getElementById('textInput');
const fillColor = document.getElementById('fillColor');
const strokeColor = document.getElementById('strokeColor');
const strokeWidth = document.getElementById('strokeWidth');
const strokeWidthLabel = document.getElementById('strokeWidthLabel');
const fontSize = document.getElementById('fontSize');
const fontSizeLabel = document.getElementById('fontSizeLabel');
const toggleHighlight = document.getElementById('toggleHighlight');

imageInput.addEventListener('change', e=>{
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=ev=>{
    img.onload=()=>{
      canvas.width=img.width;
      canvas.height=img.height;
      posX=canvas.width/2;
      posY=canvas.height/2;
      draw();
    };
    img.src=ev.target.result;
  };
  reader.readAsDataURL(file);
});

function draw(){
  if(!img.src) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(img,0,0,canvas.width,canvas.height);
  const text=textInput.value.trim();
  if(!text) return;

  const size = parseInt(fontSize.value);
  ctx.font=`bold ${size}px Tajawal`;
  ctx.textAlign='center';
  ctx.textBaseline='middle';

  // ุธู ุฃุณูุฏ (ูุงููุงูุช)
  if(highlightOn){
    ctx.shadowColor='rgba(0,0,0,0.8)';
    ctx.shadowBlur=15;
  } else {
    ctx.shadowBlur=0;
  }

  // ุงูุญุฏ ุงูุฎุงุฑุฌู
  ctx.lineWidth = parseInt(strokeWidth.value);
  ctx.strokeStyle = strokeColor.value;
  ctx.strokeText(text, posX, posY);

  // ุงูููู ุงูุฏุงุฎูู
  ctx.fillStyle = fillColor.value;
  ctx.fillText(text, posX, posY);
}

// ุชูุนูู / ุฅูุบุงุก ุงููุงููุงูุช
toggleHighlight.onclick = ()=>{
  highlightOn = !highlightOn;
  toggleHighlight.textContent = highlightOn ? 'โ ุฅุฒุงูุฉ ุงููุงููุงูุช' : '๐ฆ ุฅุถุงูุฉ ูุงููุงูุช';
  draw();
};

[textInput, fillColor, strokeColor, strokeWidth, fontSize].forEach(el=>el.addEventListener('input',()=>{
  strokeWidthLabel.textContent = strokeWidth.value + 'px';
  fontSizeLabel.textContent = fontSize.value + 'px';
  draw();
}));

// ุชุญุฑูู ุงููุต
document.getElementById('upBtn').onclick=()=>{posY-=10;draw();};
document.getElementById('downBtn').onclick=()=>{posY+=10;draw();};
document.getElementById('leftBtn').onclick=()=>{posX-=10;draw();};
document.getElementById('rightBtn').onclick=()=>{posX+=10;draw();};
document.getElementById('centerBtn').onclick=()=>{posX=canvas.width/2;posY=canvas.height/2;draw();};

// ุชุญููู ุงูุตูุฑุฉ
document.getElementById('downloadBtn').onclick=()=>{
  if(!img.src) return alert("ุงุฎุชุฑ ุตูุฑุฉ ุฃููุงู");
  const link=document.createElement('a');
  link.download='text-final.png';
  link.href=canvas.toDataURL('image/png');
  link.click();
};
</script>
</body>
</html>
